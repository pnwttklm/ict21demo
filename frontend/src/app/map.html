<head>
    <script src="https://cdn.apple-mapkit.com/mk/5.x.x/mapkit.js"></script>
    <style>
      #map {
        width: 100%;
        height: 600px;
      }
    </style>
  </head>
  
  <body>
    <div id="map"></div>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.min.js"></script>
    <script>
      // https://jkap-mapkitjs-demo.glitch.me/token
      function getToken() {
        return $.get("https://jkap-mapkitjs-demo.glitch.me/token").then(function (
          data
        ) {
          //console.log(data);
          return {
            token: data
          };
        });
      }
      getToken().then(function (data) {
        //received data!
        console.log(data);
  
        mapkit.init({
          authorizationCallback: function (done) {
            done(data.token);
          }
        });
  
        var cup = new mapkit.Coordinate(1.2644, 103.8222);
        var Cupertino = new mapkit.CoordinateRegion(
          new mapkit.Coordinate(1.2644, 103.8222),
          new mapkit.CoordinateSpan(0.167647972, 0.354985255)
        );
  
        var map = new mapkit.Map("map");
        map.region = Cupertino;
  
        var customMarker = new MarkerAnnotation(cup, {
          color: "green",
          glyphColor: "brown",
          glyphImage: { 1: "glyphImage.png" },
          selectedGlyphImage: {
            1: "detailedIcon.png",
            2: "detailedIcon_2x.png",
            3: "detailedIcon_3x.png"
          }
        });
      });
    </script>
  </body>
  